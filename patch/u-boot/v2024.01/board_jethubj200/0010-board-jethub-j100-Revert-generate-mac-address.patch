From 2fb5480d8ee7ce471a5144d59729d6b940ac433e Mon Sep 17 00:00:00 2001
From: Viacheslav Bocharov <adeep@lexina.in>
Date: Mon, 6 May 2024 13:29:15 +0300
Subject: [PATCH 10/20] board/jethub-j100 Revert generate mac address

---
 board/amlogic/jethub-j100/jethub-j100.c | 17 ++---------------
 1 file changed, 2 insertions(+), 15 deletions(-)

diff --git a/board/amlogic/jethub-j100/jethub-j100.c b/board/amlogic/jethub-j100/jethub-j100.c
index 41ef5db4932..47de78655e1 100644
--- a/board/amlogic/jethub-j100/jethub-j100.c
+++ b/board/amlogic/jethub-j100/jethub-j100.c
@@ -79,21 +79,8 @@ int misc_init_r(void)
 	}
 
 	if (mac_addr[0]==0)
-	  if (!meson_sm_get_serial(serial, SM_SERIAL_SIZE)) {
-		sid = crc32(0, (unsigned char *)serial, SM_SERIAL_SIZE);
-		/* Ensure the NIC specific bytes of the mac are not all 0 */
-		if ((sid & 0xffff) == 0)
-			sid |= 0x800000;
-
-		/* OUI registered MAC address */
-		mac_addr[0] = 0x10;
-		mac_addr[1] = 0x27;
-		mac_addr[2] = 0xBE;
-		mac_addr[3] = (sid >> 16) & 0xff;
-		mac_addr[4] = (sid >>  8) & 0xff;
-		mac_addr[5] = (sid >>  0) & 0xff;
-		eth_env_set_enetaddr("ethaddr", mac_addr);
-	  }
+	  if (!meson_sm_get_serial(serial, SM_SERIAL_SIZE))
+		meson_generate_serial_ethaddr();
 
 	return 0;
 }
-- 
2.45.1

