From c7765d41f699c3c5bba1d2ac990e7abaf2f40903 Mon Sep 17 00:00:00 2001
From: Viacheslav Bocharov <adeep@lexina.in>
Date: Thu, 30 May 2024 13:53:49 +0300
Subject: [PATCH] j200: Fix i2c devices

---
 .../amlogic/meson-sm1-jethome-jethub-j200.dts | 51 +++++++++++++------
 1 file changed, 35 insertions(+), 16 deletions(-)

diff --git a/arch/arm64/boot/dts/amlogic/meson-sm1-jethome-jethub-j200.dts b/arch/arm64/boot/dts/amlogic/meson-sm1-jethome-jethub-j200.dts
index 9ac8250cb22f..7c5c8618d819 100644
--- a/arch/arm64/boot/dts/amlogic/meson-sm1-jethome-jethub-j200.dts
+++ b/arch/arm64/boot/dts/amlogic/meson-sm1-jethome-jethub-j200.dts
@@ -531,6 +531,29 @@ &i2c1 {
 	status = "okay";
 	pinctrl-0 = <&i2c1_sda_h6_pins>, <&i2c1_sck_h7_pins>;
 	pinctrl-names = "default";
+
+	/* GPIO expander */
+	u9: gpio@22 {
+		compatible = "nxp,pca9535";
+		reg = <0x22>;
+		gpio-controller;
+		#gpio-cells = <2>;
+
+		gpio-line-names =
+			"RELAY_1", "RELAY_2",
+			"", "",
+			"UXM1_RESET", "UXM1_BOOT",
+			"UXM2_RESET", "UXM2_BOOT",
+			"DIN_1", "DIN_2", "DIN_3",
+			"","","","","";
+	};
+
+	/* 1-wire */
+	w1: onewire@18 {
+        	compatible = "maxim,ds2484";
+        	reg = <0x18>;
+      	};
+
 };
 
 
@@ -541,27 +564,12 @@ &i2c2 {
 	pinctrl-names = "default";
 };
 
-/* I2C for CPU board */
+/* I2C_EE_M3: I2C for CPU board */
 &i2c3 {
 	status = "okay";
 	pinctrl-0 = <&i2c3_sda_a_pins>, <&i2c3_sck_a_pins>;
 	pinctrl-names = "default";
 
-	u9: gpio@20 {
-		compatible = "nxp,pca9535";
-		reg = <0x20>;
-		gpio-controller;
-		#gpio-cells = <2>;
-
-		gpio-line-names =
-			"RELAY_1", "RELAY_2",
-			"", "",
-			"UXM1_RESET", "UXM1_BOOT",
-			"UXM2_RESET", "UXM2_BOOT",
-			"DIN_1", "DIN_2", "DIN_3",
-			"","","","","";
-	};
-
 	/* I2C for rtc */
 	rtc: rtc@51 {
 		status = "okay";
@@ -610,4 +618,15 @@ eeprompm: eeprom@57 {
 		vcc-supply = <&vddao_3v3>;
 	};
 
+	/* temperature sensors */
+	temp1: tmp102@48 {
+		compatible = "ti,tmp102";
+		reg = <0x48>;
+	};
+
+	temp2: tmp102@49 {
+		compatible = "ti,tmp102";
+		reg = <0x49>;
+	};
+
 };
-- 
2.45.1

